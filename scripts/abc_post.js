var abc=document.getElementById('score'),paper=document.getElementById('paper'),audioEnabled=false,displayOptions={displayLoop:true,displayRestart:true,displayPlay:true,displayProgress:true,displayWarp:true},audioOptions={chordsOff:true},s=abc.value,pageTitle=document.getElementsByTagName('h1')[0].innerHTML;abc.value="X: 1\nC: Jim McStanton\n"+(s.includes('T:')?'':"T: "+pageTitle)+"\n"+abc.innerHTML+"\n";var eventCallback=function(ev){document.querySelectorAll('.cursor-note').forEach(function(el){return el.classList.remove('cursor-note')});var elements=ev['elements'].forEach(function(el){return el[0].classList.add('cursor-note')})},updateMidi=function(tune){if(ABCJS.synth.supportsAudio()){var synthControl=new ABCJS.synth.SynthController();synthControl.load("#audio",{onEvent:eventCallback},displayOptions)}else{document.getElementById("audio").innerHTML="Audio not supported in this browser";return};var synth=new ABCJS.synth.CreateSynth();synth.init({visualObj:tune}).then(function(){synthControl.setTune(tune,false,audioOptions).then(function(){return console.log("Audio loaded")})["catch"](function(error){return console.warn("Audio problem: ",error)})})["catch"](function(error){return console.warn("Audio problem during init: ",error)})};function render(){var s=abc.value.replaceAll("\n\n","\n"),p=ABCJS.renderAbc('paper',s)[0];updateMidi(p)};render()